<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <title>Acceuil</title>
        <link rel="stylesheet" href="{{ asset('assets/w3.css')}}">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <link href="{{ asset('assets/bootstrap/bootstrap.min.css') }}" rel="stylesheet">
        <script src="{{ asset('assets/bootstrap/bootstrap.bundle.min.js') }}"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
        
        <style>
            * {
                box-sizing: border-box;
            }

            body, h1, h2, h3, h4, h5, h6 {
                font-family: "Times New Roman", Times, serif;
            }

            a{
                text-decoration: none;
                color: black;
            }

            .container {
                min-height: 350px;
                background: #fff;
                border-radius: 2px;
                overflow: hidden;
                box-shadow: 0 14px 28px rgba(0, 0, 0, 0.15);
                margin-bottom: 5%;
            }

            /* Refonte du menu de navigation pour mieux utiliser W3.CSS */
            #nav {
                width: 20%;
                height: 100vh;
                position: fixed;
                top: 0;
                left: 0;
                z-index: 999;
                padding-top: 20px;
            }

            #nav a {
                display: block;
                margin: 10px 0;
            }

            /* Mobile Responsiveness */
            @media(max-width: 1050px) {
                #nav {
                    width: 100%;
                    position: relative;
                    height: auto;
                }
            }

            .content-wrapper {
                margin-left: 22%;
                padding: 20px;
            }

            /* Refonte des boutons */
            .w3-button {
                margin-bottom: 10px;
            }
            #nouveau{
                margin-right: 10px;
            }
            #active{
                background: rgba(0, 0, 0, 0.10);
                color: black;
            }
        </style>
    </head>
    <body>
        {# Vérifiez si l'utilisateur a le rôle ADMIN #}
        {% if is_granted('ROLE_ADMIN') %}

            {# Contenue pour l'administrateur #}
            <div class="w3-row">

                {# bare de navigation pour l'administrateur #}
                <div class="w3-col w3-yellow" id="nav">
                    <h1 class="w3-opacity h5 mb-3 font-weight-normal">
                        <i class="fa fa-user-circle w3-opacity"></i>
                        {{ app.user.userIdentifier }}
                    </h1>
                    <a href="{{path('app_home_page')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fa fa-home w3-opacity"></i> 
                            Acceuil
                        </button>
                    </a>
                    <a href="{{path('user_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fa fa-users w3-opacity"></i> 
                            Missionnaire
                        </button>
                    </a>
                    <a href="{{path('bse_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-briefcase"></i>
                            Mission
                        </button>
                    </a>
                    <a href="{{path('payment_index')}}">
                        <button class="w3-button w3-block w3-left-align" id="active">
                            <i class="fas fa-dollar-sign"></i> 
                            Payement
                        </button>
                    </a>
                    <a href="{{path('bureau_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-building"></i>
                            Agence
                        </button>
                    </a>
                    <a href="{{path('credit_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-sync"></i>
                            Renouveller credit
                        </button>
                    </a>
                    <a href="{{ path('app_logout') }}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-sign-out-alt"></i>
                            Se deconnecter
                        </button>
                    </a>
                </div>

                <div class="w3-container content-wrapper">

                    {# Liste BST non payer #}
                    <div>

                        {# Entete du Liste BST non payer  contenue #}
                        <div>
                            <div class="w3-row-padding w3-margin-bottom w3-border w3-border-indigo">
                                <center>
                                    <h4 class="w3-text-indigo" ><b>Liste BST non payer</b></h4>
                                </center>
                            </div>

                            <div class="w3-row-padding w3-margin-bottom">
                                <div  class="w3-twothird">
                                    <a href="#creation"><button class="w3-button w3-yellow">BST non payer</button></a>
                                    <a href="#validation"><button class="w3-button">BST payé</button></a>
                                    <a href="#validation"><button class="w3-button">OR Non payer</button></a>
                                    <a href="#validation"><button class="w3-button">OR payé</button></a>
                                </div>
                                <div  class="w3-third">
                                    <input class="w3-input w3-border " type="text" placeholder="Rechercher un missionnaire..." id="myInput" onkeyup="myRecherche('myTable','myInput',1)">
                                </div>
                            </div>
                        </div>
                        
                        {# Corp du Liste BST non payer  contenue #}
                        <div>
                            <table class="w3-table w3-bordered">
                                <tr class="w3-light-grey">
                                    <th>destination</th>
                                    <th>motif</th>
                                    <th>date_bse</th>
                                    <th>matricule</th>
                                    <th>duree_mission</th>
                                    <th>nom_detenteur</th>
                                    <th>prenom_detenteur</th>
                                    <th>fonction_detenteur</th>
                                    <th>nom_chaufeur</th>
                                    <th>prenom_chaufeur</th>
                                </tr>

                                <tr>
                                    {% for validation_accepte_non_paye_bst in validation_accepte_non_paye_bst %}
                                        <td>{{ validation_accepte_non_paye_bst.destination }}</td>
                                        <td>{{ validation_accepte_non_paye_bst.motif }}</td>
                                        <td>{{ validation_accepte_non_paye_bst.dateBse | date('m-d-Y') }}</td>
                                        <td>{{ validation_accepte_non_paye_bst.matricule }}</td>
                                        <td>{{ validation_accepte_non_paye_bst.dureeMission }}</td>
                                        <td>{{ validation_accepte_non_paye_bst.nomDetenteur }}</td>
                                        <td>{{ validation_accepte_non_paye_bst.prenomDetenteur }}</td>
                                        <td>{{ validation_accepte_non_paye_bst.fonctionDetenteur }}</td>
                                        <td>{{ validation_accepte_non_paye_bst.nomChaufeur }}</td>
                                        <td>{{ validation_accepte_non_paye_bst.prenomChafeur }}</td>
                                    {% endfor %}
                                </tr>
                            </table>
                        </div>
                    </div>


                    {# Liste Ordre de oroute à payer #}
                    <div>

                        {# Entete du Liste Ordre de oroute à payer  contenue #}
                        <div>
                            <div class="w3-row-padding w3-margin-bottom w3-border w3-border-indigo">
                                <center>
                                    <h4 class="w3-text-indigo" ><b>Liste Ordre de oroute à payer</b></h4>
                                </center>
                            </div>

                            <div class="w3-row-padding w3-margin-bottom">
                                <div  class="w3-twothird">
                                    <a href="#creation"><button class="w3-button">BST non payer</button></a>
                                    <a href="#validation"><button class="w3-button w3-yellow">BST payé</button></a>
                                    <a href="#validation"><button class="w3-button">OR Non payer</button></a>
                                    <a href="#validation"><button class="w3-button">OR payé</button></a>
                                </div>
                                <div  class="w3-third">
                                    <input class="w3-input w3-border " type="text" placeholder="Rechercher un missionnaire..." id="myInput" onkeyup="myRecherche('myTable','myInput',1)">
                                </div>
                            </div>
                        </div>
                        
                        {# Corp du Liste BST non payer  contenue #}
                        <div>
                            <table class="w3-table w3-bordered">
                                <tr class="w3-light-grey">
                                    <th>destination</th>
                                    <th>motif</th>
                                    <th>date_bse</th>
                                    <th>matricule</th>
                                    <th>duree_mission</th>
                                    <th>nom_detenteur</th>
                                    <th>prenom_detenteur</th>
                                    <th>fonction_detenteur</th>
                                    <th>nom_chaufeur</th>
                                    <th>prenom_chaufeur</th>
                                </tr>

                                <tr>
                                    {% for validation_accepte_non_paye_or in validation_accepte_non_paye_or %}
                                        <td>{{ validation_accepte_non_paye_or.destination }}</td>
                                        <td>{{ validation_accepte_non_paye_or.motif }}</td>
                                        <td>{{ validation_accepte_non_paye_or.dateBse | date('m-d-Y') }}</td>
                                        <td>{{ validation_accepte_non_paye_or.matricule }}</td>
                                        <td>{{ validation_accepte_non_paye_or.dureeMission }}</td>
                                        <td>{{ validation_accepte_non_paye_or.nomDetenteur }}</td>
                                        <td>{{ validation_accepte_non_paye_or.prenomDetenteur }}</td>
                                        <td>{{ validation_accepte_non_paye_or.fonctionDetenteur }}</td>
                                        <td>{{ validation_accepte_non_paye_or.nomChaufeur }}</td>
                                        <td>{{ validation_accepte_non_paye_or.prenomChafeur }}</td>
                                    {% endfor %}
                                </tr>
                            </table>
                        </div>
                    </div>
                    
                    {# Liste Bst deja paye #}
                    <div>

                        {# Entete du Liste Ordre de oroute à payer  contenue #}
                        <div>
                            <div class="w3-row-padding w3-margin-bottom w3-border w3-border-indigo">
                                <center>
                                    <h4 class="w3-text-indigo" ><b>Liste Bst deja paye</b></h4>
                                </center>
                            </div>

                            <div class="w3-row-padding w3-margin-bottom">
                                <div  class="w3-twothird">
                                    <a href="#creation"><button class="w3-button">BST non payer</button></a>
                                    <a href="#validation"><button class="w3-button">BST payé</button></a>
                                    <a href="#validation"><button class="w3-button w3-yellow">OR Non payer</button></a>
                                    <a href="#validation"><button class="w3-button">OR payé</button></a>
                                </div>
                                <div  class="w3-third">
                                    <input class="w3-input w3-border " type="text" placeholder="Rechercher un missionnaire..." id="myInput" onkeyup="myRecherche('myTable','myInput',1)">
                                </div>
                            </div>
                        </div>
                        
                        {# Corp du Liste BST non payer  contenue #}
                        <div>
                            <table class="w3-table w3-bordered">
                                <tr class="w3-light-grey">
                                    <th>destination</th>
                                    <th>motif</th>
                                    <th>date_bse</th>
                                    <th>matricule</th>
                                    <th>duree_mission</th>
                                    <th>nom_detenteur</th>
                                    <th>prenom_detenteur</th>
                                    <th>fonction_detenteur</th>
                                    <th>nom_chaufeur</th>
                                    <th>prenom_chaufeur</th>
                                </tr>

                                <tr>
                                    {% for validation_accepte_paye_or in validation_accepte_paye_or %}
                                        <td>{{ validation_accepte_paye_or.destination }}</td>
                                        <td>{{ validation_accepte_paye_or.motif }}</td>
                                        <td>{{ validation_accepte_paye_or.dateBse | date('m-d-Y') }}</td>
                                        <td>{{ validation_accepte_paye_or.matricule }}</td>
                                        <td>{{ validation_accepte_paye_or.dureeMission }}</td>
                                        <td>{{ validation_accepte_paye_or.nomDetenteur }}</td>
                                        <td>{{ validation_accepte_paye_or.prenomDetenteur }}</td>
                                        <td>{{ validation_accepte_paye_or.fonctionDetenteur }}</td>
                                        <td>{{ validation_accepte_paye_or.nomChaufeur }}</td>
                                        <td>{{ validation_accepte_paye_or.prenomChafeur }}</td>
                                    {% endfor %}
                                </tr>
                            </table>
                        </div>
                    </div>

                    {# liste Ordre de route deja paye #}
                    <div>

                        {# Entete du Liste Ordre de route deja paye  contenue #}
                        <div>
                            <div class="w3-row-padding w3-margin-bottom w3-border w3-border-indigo">
                                <center>
                                    <h4 class="w3-text-indigo" ><b>Liste Ordre de route deja paye</b></h4>
                                </center>
                            </div>

                            <div class="w3-row-padding w3-margin-bottom">
                                <div  class="w3-twothird">
                                    <a href="#creation"><button class="w3-button">BST non payer</button></a>
                                    <a href="#validation"><button class="w3-button">BST payé</button></a>
                                    <a href="#validation"><button class="w3-button">OR Non payer</button></a>
                                    <a href="#validation"><button class="w3-button w3-yellow">OR payé</button></a>
                                </div>
                                <div  class="w3-third">
                                    <input class="w3-input w3-border " type="text" placeholder="Rechercher un missionnaire..." id="myInput" onkeyup="myRecherche('myTable','myInput',1)">
                                </div>
                            </div>
                        </div>
                        
                        {# Corp du Liste Ordre de route deja paye   contenue #}
                        <div>
                            <table class="w3-table w3-bordered">
                                <tr  class="w3-light-grey">
                                    <th>destination</th>
                                    <th>motif</th>
                                    <th>date_bse</th>
                                    <th>matricule</th>
                                    <th>duree_mission</th>
                                    <th>nom_detenteur</th>
                                    <th>prenom_detenteur</th>
                                    <th>fonction_detenteur</th>
                                    <th>nom_chaufeur</th>
                                    <th>prenom_chaufeur</th>
                                </tr>

                                <tr>
                                    {% for validation_accepte_paye_bst in validation_accepte_paye_bst %}
                                        <td>{{ validation_accepte_paye_bst.destination }}</td>
                                        <td>{{ validation_accepte_paye_bst.motif }}</td>
                                        <td>{{ validation_accepte_paye_bst.dateBse | date('m-d-Y') }}</td>
                                        <td>{{ validation_accepte_paye_bst.matricule }}</td>
                                        <td>{{ validation_accepte_paye_bst.dureeMission }}</td>
                                        <td>{{ validation_accepte_paye_bst.nomDetenteur }}</td>
                                        <td>{{ validation_accepte_paye_bst.prenomDetenteur }}</td>
                                        <td>{{ validation_accepte_paye_bst.fonctionDetenteur }}</td>
                                        <td>{{ validation_accepte_paye_bst.nomChaufeur }}</td>
                                        <td>{{ validation_accepte_paye_bst.prenomChafeur }}</td>
                                    {% endfor %}
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        {# Vérifiez si l'utilisateur a le rôle MISSIONNAIRE #}
        {% elseif is_granted('ROLE_MISSIONNAIRE') %}

            {# contenue pour le missionnaire#}
            <div class="w3-row">

                {# bare de navigation pour le missionnaire #}
                <div class="w3-col w3-yellow" id="nav">
                    <h1 class="w3-opacity h5 mb-3 font-weight-normal">
                        <i class="fa fa-user-circle w3-opacity"></i>
                        {{ app.user.userIdentifier }}
                    </h1>
                    <a href="{{path('app_home_page')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fa fa-home w3-opacity"></i> 
                            Acceuil
                        </button>
                    </a>
                    <a href="{{path('user_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fa fa-users w3-opacity"></i> 
                            Missionnaire
                        </button>
                    </a>
                    <a href="{{path('bse_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-briefcase"></i>
                            Mission
                        </button>
                    </a>
                    <a href="{{path('payment_index')}}">
                        <button class="w3-button w3-block w3-left-align" id="active">
                            <i class="fas fa-dollar-sign"></i> 
                            Payement
                        </button>
                    </a>
                    <a href="{{path('bureau_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-building"></i>
                            Agence
                        </button>
                    </a>
                    <a href="{{path('credit_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-sync"></i>
                            Renouveller credit
                        </button>
                    </a>
                    <a href="{{ path('app_logout') }}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-sign-out-alt"></i>
                            Se deconnecter
                        </button>
                    </a>
                </div>

                <div class="w3-container content-wrapper"></div>
            </div>


        {# Vérifiez si l'utilisateur a le rôle USER #}
        {% elseif is_granted('ROLE_USER') %}

            {# contenue pour l'utilisateur simple #}
            <div class="w3-row">

                {# bare de navigation pour l'utilisateur simple #}
                <div class="w3-col w3-yellow" id="nav">
                    <h1 class="w3-opacity h5 mb-3 font-weight-normal">
                        <i class="fa fa-user-circle w3-opacity"></i>
                        {{ app.user.userIdentifier }}
                    </h1>
                    <a href="{{path('app_home_page')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fa fa-home w3-opacity"></i> 
                            Acceuil
                        </button>
                    </a>
                    <a href="{{path('user_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fa fa-users w3-opacity"></i> 
                            Missionnaire
                        </button>
                    </a>
                    <a href="{{path('bse_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-briefcase"></i>
                            Mission
                        </button>
                    </a>
                    <a href="{{path('payment_index')}}">
                        <button class="w3-button w3-block w3-left-align" id="active">
                            <i class="fas fa-dollar-sign"></i> 
                            Payement
                        </button>
                    </a>
                    <a href="{{path('bureau_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-building"></i>
                            Agence
                        </button>
                    </a>
                    <a href="{{path('credit_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-sync"></i>
                            Renouveller credit
                        </button>
                    </a>
                    <a href="{{ path('app_logout') }}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-sign-out-alt"></i>
                            Se deconnecter
                        </button>
                    </a>
                </div>

                <div class="w3-container content-wrapper"></div>
            </div>

        {% endif %}
    </body>
</html>