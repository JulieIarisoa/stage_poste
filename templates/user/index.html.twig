<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <title>Acceuil</title>
        <link rel="stylesheet" href="{{ asset('assets/w3.css')}}">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <link href="{{ asset('assets/bootstrap/bootstrap.min.css') }}" rel="stylesheet">
        <script src="{{ asset('assets/bootstrap/bootstrap.bundle.min.js') }}"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
        
        <style>
            * {
                box-sizing: border-box;
            }

            body, h1, h2, h3, h4, h5, h6 {
                font-family: "Times New Roman", Times, serif;
            }

            a{
                text-decoration: none;
                color: black;
            }
            .w3-button{
                display: block;
            }

            .container {
                min-height: 350px;
                background: #fff;
                border-radius: 2px;
                overflow: hidden;
                box-shadow: 0 14px 28px rgba(0, 0, 0, 0.15);
                margin-bottom: 5%;
            }

            /* Refonte du menu de navigation pour mieux utiliser W3.CSS */
            #nav {
                width: 20%;
                height: 100vh;
                position: fixed;
                top: 0;
                left: 0;
                z-index: 999;
                padding-top: 20px;
            }

            #nav a {
                display: block;
                margin: 10px 0;
            }

            /* Mobile Responsiveness */
            @media(max-width: 1050px) {
                #nav {
                    width: 100%;
                    position: relative;
                    height: auto;
                }
            }

            .content-wrapper {
                margin-left: 22%;
                padding: 20px;
            }

            /* Refonte des boutons */
            .w3-button {
                margin-bottom: 10px;
            }
            #nouveau{
                margin-right: 10px;
            }
            #active{
                background: rgba(0, 0, 0, 0.10);
                color: black;
            }
        </style>
    </head>
    <body>
        {# Vérifiez si l'utilisateur a le rôle ADMIN #}
        {% if is_granted('ROLE_ADMIN') %}

            {# Contenue pour l'administrateur #}
            <div class="w3-row">

                {# bare de navigation pour l'administrateur #}
                <div class="w3-col w3-yellow" id="nav">
                    <a href="{{path('app_home_page')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fa fa-home w3-opacity"></i> 
                            Acceuil
                        </button>
                    </a>
                    <a href="{{path('user_index')}}">
                        <button class="w3-button w3-block w3-left-align" id="active">
                            <i class="fa fa-users w3-opacity"></i> 
                            Missionnaire
                        </button>
                    </a>
                    <a href="{{path('bse_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-briefcase"></i>
                            Mission
                        </button>
                    </a>
                    <a href="{{path('depart_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-car"></i>
                            Depart
                        </button>
                    </a>
                    <a href="{{path('payment_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-dollar-sign"></i> 
                            Payement
                        </button>
                    </a>
                    <a href="{{path('bureau_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-building"></i>
                            Agence
                        </button>
                    </a>
                    <a href="{{path('credit_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-sync"></i>
                            Renouveller credit
                        </button>
                    </a>
                </div>

                {# Corp du contenue pour l'administrateur #}
                <div  class="w3-container content-wrapper">

                    {# Entete du corp pour l'administrateur #}
                    <div class="d-flex align-items-center">
                        <a href="{{ path('app_register') }}" class="w3-button w3-blue w3-quarter w3-margin" id="nouveau"><i class="fa fa-user-plus w3-margin-right"></i>Add utilisateur</a>
                        <input class="w3-input w3-border w3-padding w3-half w3-margin" type="text" placeholder="Rechercher par nom ou par prenom..." id="myInput" onkeyup="myFunction('myTable','myInput',2)">
                        {# bare d'icon #}
                        <div class="w3-container w3-cell w3-mobile w3-display-topright w3-margin">
                            <div>
                                <div  class="w3-center">
                                    <i class="fa fa-bell w3-opacity"  onclick="document.getElementById('notify').style.display='block'"></i>
                                    <i class="fa fa-user-circle w3-opacity w3-margin-left"   onclick="document.getElementById('profile').style.display='block'"></i>
                                    <i class="fa fa-bars w3-opacity w3-margin-left"  onclick="document.getElementById('treebars').style.display='block'"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    {# Contenue #}
                    <div class="d-flex align-items-center">
                        <table class="w3-table w3-bordered" id="myTable">
                            <tr class="w3-light-grey">
                                <th>Matricule</th>
                                <th>Nom</th>
                                <th>Prenom</th>
                                <th>Fonction</th>
                                <th>Taux Journalier</th>
                                <th>Titre</th>
                                <th></th>
                                <th></th>
                                <th></th>
                            </tr>
                            {% for user in user %}
                                <tr>
                                    <td>{{ user.matricule }}</td>
                                    <td>{{ user.nom }}</td>
                                    <td>{{ user.prenom }}</td>
                                    <td>{{ user.fonction }}</td>
                                    <td>{{ user.tauxJournalier }}</td>
                                    <td>{{ user.titre }}</td>
                                    <td class="w3-display-flex">
                                        <a href="{{ path('user_show', {id: user.id}) }}" class="w3-button w3-light-grey w3-small"><i class="fas fa-eye"></i></a>
                                    </td>
                                    <td class="w3-display-flex">
                                        <a href="{{ path('user_edit', {id: user.id}) }}" class="w3-button w3-yellow w3-small"><i class="fas fa-edit"></i></a>
                                    </td>
                                    <td class="w3-display-flex">
                                        <a href="{{ path('user_delete', {id: user.id}) }}" class="w3-button w3-red w3-small"><i class="fas fa-trash-alt"></i></a>
                                    </td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>

                    
                    {# modal profile pour l'administrateur #}
                    <div class="Modal">
                        <div id="profile" class="w3-modal">
                            <div  class="w3-modal-content w3-animate-top">
                                <div class=" w3-display-topmiddle w3-white w3-padding w3-round-xlarge">
                                    <span onclick="document.getElementById('profile').style.display='none'" class="w3-button w3-display-topright w3-circle">&times;</span>
                                    <center>
                                        {% if app.user.sexe == 'Femme' %}
                                            <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/fprofile.png')}}" style="width: 60px;" class="w3-margin w3-circle"/>
                                                <!-- Icône positionnée -->
                                                <a href="{{ path('user_edit', {id: app.user.id}) }}" style="position: absolute; top: 58px; right: 18px;">
                                                    <i class="fas fa-edit w3-white" style="font-size: 10px; color: #007bff;"></i>
                                                </a>
                                            </div>
                                        {% elseif app.user.sexe == 'Homme' %}
                                           <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/hprofile.png')}}" style="width: 60px;" class="w3-margin w3-circle"/>
                                                <!-- Icône positionnée -->
                                                <a href="{{ path('user_edit', {id: app.user.id}) }}" style="position: absolute; top: 58px; right: 18px;">
                                                    <i class="fas fa-edit w3-white" style="font-size: 10px; color: #007bff;"></i>
                                                </a>
                                            </div>

                                        {% endif %}
                                            
                                        <h6>Bonjour !</h6>
                                        <p>{{ app.user.prenom | upper() }}</br>
                                        <span class="w3-opacity">{{ app.user.userIdentifier }}</span></p>
                                        <button class='w3-btn w3-round-xxlarge w3-margin-bottom w3-text-red'>Account</button>
                                        <a href="{{ path('app_logout') }}">
                                            <button class='w3-btn w3-round-xxlarge w3-margin-bottom w3-text-red'>Se deconnecter</button>
                                        </a>
                                    </center>
                                </div>
                            </div>
                        </div>
                    </div>

                    {# modal notification pour l'administrateur #}
                    <div class="Modal">
                        <div id="notify" class="w3-modal">
                            <div  class="w3-modal-content w3-animate-top">
                                <div class=" w3-display-topmiddle w3-white w3-padding w3-round-xlarge">
                                    <span onclick="document.getElementById('notify').style.display='none'" class="w3-button w3-display-topright w3-circle">&times;</span>
                                    <center>
                                        <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/logo.png')}}" style="width: 60px;" class="w3-margin"/>
                                        </div>
                                        <p>Aucun notification!</p>
                                    </center>
                                </div>
                            </div>
                        </div>
                    </div>

                    {# modal bars pour l'administrateur #}
                    <div class="Modal">
                        <div id="treebars" class="w3-modal">
                            <div  class="w3-modal-content w3-animate-top">
                                <div class=" w3-display-topmiddle w3-white w3-padding w3-round-xlarge">
                                    <span onclick="document.getElementById('treebars').style.display='none'" class="w3-button w3-display-topright w3-circle">&times;</span>
                                    <center>
                                        <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/logo.png')}}" style="width: 60px;" class="w3-margin"/>
                                        </div>
                                        <p>Application web </br>Gerant les avancés autorisées </br>Au sein du service comptable de la </br> Direction Inter Régional de la Paositra Malagasy </br> FIANARANTSOA  301!</p>
                                        <p class='w3-margin-bottom w3-text-blue w3-opacity'>Régle | Condition d'utilisation</p>
                                    </center>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        {# Vérifiez si l'utilisateur a le rôle MISSIONNAIRE #}
        {% elseif is_granted('ROLE_MISSIONNAIRE') %}

            
            {# Contenue pour l'administrateur #}
            <div class="w3-row">

                {# bare de navigation pour l'administrateur #}
                <div class="w3-col w3-yellow" id="nav">
                    <a href="{{path('app_home_page')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fa fa-home w3-opacity"></i> 
                            Acceuil
                        </button>
                    </a>
                    <a href="{{path('user_index')}}">
                        <button class="w3-button w3-block w3-left-align" id="active">
                            <i class="fa fa-users w3-opacity"></i> 
                            Missionnaire
                        </button>
                    </a>
                    <a href="{{path('bse_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-briefcase"></i>
                            Mission
                        </button>
                    </a>
                    <a href="{{path('payment_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-dollar-sign"></i> 
                            Payement
                        </button>
                    </a>
                    <a href="{{path('bureau_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-building"></i>
                            Agence
                        </button>
                    </a>
                    <a href="{{path('credit_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-sync"></i>
                            Renouveller credit
                        </button>
                    </a>
                </div>

                {# Corp du contenue pour l'administrateur #}
                <div  class="w3-container content-wrapper">

                    {# Entete du corp pour l'administrateur #}
                    <div class="d-flex align-items-center">
                        <a href="{{ path('app_register') }}" class="w3-button w3-blue w3-quarter w3-margin" id="nouveau"><i class="fa fa-user-plus w3-margin-right"></i>Add utilisateur</a>
                        <input class="w3-input w3-border w3-padding w3-half w3-margin" type="text" placeholder="Rechercher par nom ou par prenom..." id="myInput" onkeyup="myFunction('myTable','myInput',2)">
                        {# bare d'icon #}
                        <div class="w3-container w3-cell w3-mobile w3-display-topright w3-margin">
                            <div>
                                <div  class="w3-center">
                                    <i class="fa fa-bell w3-opacity"  onclick="document.getElementById('notify').style.display='block'"></i>
                                    <i class="fa fa-user-circle w3-opacity w3-margin-left"   onclick="document.getElementById('profile').style.display='block'"></i>
                                    <i class="fa fa-bars w3-opacity w3-margin-left"  onclick="document.getElementById('treebars').style.display='block'"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    {# Contenue #}
                    <div class="d-flex align-items-center">
                        <table class="w3-table w3-bordered" id="myTable">
                            <tr class="w3-light-grey">
                                <th>Matricule</th>
                                <th>Nom</th>
                                <th>Prenom</th>
                                <th>Fonction</th>
                                <th>Taux Journalier</th>
                                <th>Titre</th>
                                <th></th>
                                <th></th>
                                <th></th>
                            </tr>
                            {% for user in user %}
                                <tr>
                                    <td>{{ user.matricule }}</td>
                                    <td>{{ user.nom }}</td>
                                    <td>{{ user.prenom }}</td>
                                    <td>{{ user.fonction }}</td>
                                    <td>{{ user.tauxJournalier }}</td>
                                    <td>{{ user.titre }}</td>
                                    <td class="w3-display-flex">
                                        <a href="{{ path('user_show', {id: user.id}) }}" class="w3-button w3-light-grey w3-small"><i class="fas fa-eye"></i></a>
                                    </td>
                                    <td class="w3-display-flex">
                                        <a href="{{ path('user_edit', {id: user.id}) }}" class="w3-button w3-yellow w3-small"><i class="fas fa-edit"></i></a>
                                    </td>
                                    <td class="w3-display-flex">
                                        <a href="{{ path('user_delete', {id: user.id}) }}" class="w3-button w3-red w3-small"><i class="fas fa-trash-alt"></i></a>
                                    </td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>

                    
                    {# modal profile pour l'administrateur #}
                    <div class="Modal">
                        <div id="profile" class="w3-modal">
                            <div  class="w3-modal-content w3-animate-top">
                                <div class=" w3-display-topmiddle w3-white w3-padding w3-round-xlarge">
                                    <span onclick="document.getElementById('profile').style.display='none'" class="w3-button w3-display-topright w3-circle">&times;</span>
                                    <center>
                                        {% if app.user.sexe == 'Femme' %}
                                            <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/fprofile.png')}}" style="width: 60px;" class="w3-margin w3-circle"/>
                                                <!-- Icône positionnée -->
                                                <a href="{{ path('user_edit', {id: app.user.id}) }}" style="position: absolute; top: 58px; right: 18px;">
                                                    <i class="fas fa-edit w3-white" style="font-size: 10px; color: #007bff;"></i>
                                                </a>
                                            </div>
                                        {% elseif app.user.sexe == 'Homme' %}
                                           <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/hprofile.png')}}" style="width: 60px;" class="w3-margin w3-circle"/>
                                                <!-- Icône positionnée -->
                                                <a href="{{ path('user_edit', {id: app.user.id}) }}" style="position: absolute; top: 58px; right: 18px;">
                                                    <i class="fas fa-edit w3-white" style="font-size: 10px; color: #007bff;"></i>
                                                </a>
                                            </div>

                                        {% endif %}
                                            
                                        <h6>Bonjour !</h6>
                                        <p>{{ app.user.prenom | upper() }}</br>
                                        <span class="w3-opacity">{{ app.user.userIdentifier }}</span></p>
                                        <button class='w3-btn w3-round-xxlarge w3-margin-bottom w3-text-red'>Account</button>
                                        <a href="{{ path('app_logout') }}">
                                            <button class='w3-btn w3-round-xxlarge w3-margin-bottom w3-text-red'>Se deconnecter</button>
                                        </a>
                                    </center>
                                </div>
                            </div>
                        </div>
                    </div>

                    {# modal notification pour l'administrateur #}
                    <div class="Modal">
                        <div id="notify" class="w3-modal">
                            <div  class="w3-modal-content w3-animate-top">
                                <div class=" w3-display-topmiddle w3-white w3-padding w3-round-xlarge">
                                    <span onclick="document.getElementById('notify').style.display='none'" class="w3-button w3-display-topright w3-circle">&times;</span>
                                    <center>
                                        <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/logo.png')}}" style="width: 60px;" class="w3-margin"/>
                                        </div>
                                        <p>Aucun notification!</p>
                                    </center>
                                </div>
                            </div>
                        </div>
                    </div>

                    {# modal bars pour l'administrateur #}
                    <div class="Modal">
                        <div id="treebars" class="w3-modal">
                            <div  class="w3-modal-content w3-animate-top">
                                <div class=" w3-display-topmiddle w3-white w3-padding w3-round-xlarge">
                                    <span onclick="document.getElementById('treebars').style.display='none'" class="w3-button w3-display-topright w3-circle">&times;</span>
                                    <center>
                                        <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/logo.png')}}" style="width: 60px;" class="w3-margin"/>
                                        </div>
                                        <p>Application web </br>Gerant les avancés autorisées </br>Au sein du service comptable de la </br> Direction Inter Régional de la Paositra Malagasy </br> FIANARANTSOA  301!</p>
                                        <p class='w3-margin-bottom w3-text-blue w3-opacity'>Régle | Condition d'utilisation</p>
                                    </center>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        {# Vérifiez si l'utilisateur a le rôle Payeur #}
        {% elseif is_granted('ROLE_PAYEUR') %}

            {# Contenue pour l'administrateur #}
            <div class="w3-row">

                {# bare de navigation pour l'administrateur #}
                <div class="w3-col w3-yellow" id="nav">
                    <a href="{{path('app_home_page')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fa fa-home w3-opacity"></i> 
                            Acceuil
                        </button>
                    </a>
                    <a href="{{path('user_index')}}">
                        <button class="w3-button w3-block w3-left-align" id="active">
                            <i class="fa fa-users w3-opacity"></i> 
                            Missionnaire
                        </button>
                    </a>
                    <a href="{{path('bse_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-briefcase"></i>
                            Mission
                        </button>
                    </a>
                    <a href="{{path('payment_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-dollar-sign"></i> 
                            Payement
                        </button>
                    </a>
                    <a href="{{path('bureau_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-building"></i>
                            Agence
                        </button>
                    </a>
                    <a href="{{path('credit_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-sync"></i>
                            Renouveller credit
                        </button>
                    </a>
                </div>

                {# Corp du contenue pour l'administrateur #}
                <div  class="w3-container content-wrapper">

                    {# Entete du corp pour l'administrateur #}
                    <div class="d-flex align-items-center">
                        <a href="{{ path('app_register') }}" class="w3-button w3-blue w3-quarter w3-margin" id="nouveau"><i class="fa fa-user-plus w3-margin-right"></i>Add utilisateur</a>
                        <input class="w3-input w3-border w3-padding w3-half w3-margin" type="text" placeholder="Rechercher par nom ou par prenom..." id="myInput" onkeyup="myFunction('myTable','myInput',2)">
                        {# bare d'icon #}
                        <div class="w3-container w3-cell w3-mobile w3-display-topright w3-margin">
                            <div>
                                <div  class="w3-center">
                                    <i class="fa fa-bell w3-opacity"  onclick="document.getElementById('notify').style.display='block'"></i>
                                    <i class="fa fa-user-circle w3-opacity w3-margin-left"   onclick="document.getElementById('profile').style.display='block'"></i>
                                    <i class="fa fa-bars w3-opacity w3-margin-left"  onclick="document.getElementById('treebars').style.display='block'"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    {# Contenue #}
                    <div class="d-flex align-items-center">
                        <table class="w3-table w3-bordered" id="myTable">
                            <tr class="w3-light-grey">
                                <th>Matricule</th>
                                <th>Nom</th>
                                <th>Prenom</th>
                                <th>Fonction</th>
                                <th>Taux Journalier</th>
                                <th>Titre</th>
                                <th></th>
                                <th></th>
                                <th></th>
                            </tr>
                            {% for user in user %}
                                <tr>
                                    <td>{{ user.matricule }}</td>
                                    <td>{{ user.nom }}</td>
                                    <td>{{ user.prenom }}</td>
                                    <td>{{ user.fonction }}</td>
                                    <td>{{ user.tauxJournalier }}</td>
                                    <td>{{ user.titre }}</td>
                                    <td class="w3-display-flex">
                                        <a href="{{ path('user_show', {id: user.id}) }}" class="w3-button w3-light-grey w3-small"><i class="fas fa-eye"></i></a>
                                    </td>
                                    <td class="w3-display-flex">
                                        <a href="{{ path('user_edit', {id: user.id}) }}" class="w3-button w3-yellow w3-small"><i class="fas fa-edit"></i></a>
                                    </td>
                                    <td class="w3-display-flex">
                                        <a href="{{ path('user_delete', {id: user.id}) }}" class="w3-button w3-red w3-small"><i class="fas fa-trash-alt"></i></a>
                                    </td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>

                    
                    {# modal profile pour l'administrateur #}
                    <div class="Modal">
                        <div id="profile" class="w3-modal">
                            <div  class="w3-modal-content w3-animate-top">
                                <div class=" w3-display-topmiddle w3-white w3-padding w3-round-xlarge">
                                    <span onclick="document.getElementById('profile').style.display='none'" class="w3-button w3-display-topright w3-circle">&times;</span>
                                    <center>
                                        {% if app.user.sexe == 'Femme' %}
                                            <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/fprofile.png')}}" style="width: 60px;" class="w3-margin w3-circle"/>
                                                <!-- Icône positionnée -->
                                                <a href="{{ path('user_edit', {id: app.user.id}) }}" style="position: absolute; top: 58px; right: 18px;">
                                                    <i class="fas fa-edit w3-white" style="font-size: 10px; color: #007bff;"></i>
                                                </a>
                                            </div>
                                        {% elseif app.user.sexe == 'Homme' %}
                                           <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/hprofile.png')}}" style="width: 60px;" class="w3-margin w3-circle"/>
                                                <!-- Icône positionnée -->
                                                <a href="{{ path('user_edit', {id: app.user.id}) }}" style="position: absolute; top: 58px; right: 18px;">
                                                    <i class="fas fa-edit w3-white" style="font-size: 10px; color: #007bff;"></i>
                                                </a>
                                            </div>

                                        {% endif %}
                                            
                                        <h6>Bonjour !</h6>
                                        <p>{{ app.user.prenom | upper() }}</br>
                                        <span class="w3-opacity">{{ app.user.userIdentifier }}</span></p>
                                        <button class='w3-btn w3-round-xxlarge w3-margin-bottom w3-text-red'>Account</button>
                                        <a href="{{ path('app_logout') }}">
                                            <button class='w3-btn w3-round-xxlarge w3-margin-bottom w3-text-red'>Se deconnecter</button>
                                        </a>
                                    </center>
                                </div>
                            </div>
                        </div>
                    </div>

                    {# modal notification pour l'administrateur #}
                    <div class="Modal">
                        <div id="notify" class="w3-modal">
                            <div  class="w3-modal-content w3-animate-top">
                                <div class=" w3-display-topmiddle w3-white w3-padding w3-round-xlarge">
                                    <span onclick="document.getElementById('notify').style.display='none'" class="w3-button w3-display-topright w3-circle">&times;</span>
                                    <center>
                                        <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/logo.png')}}" style="width: 60px;" class="w3-margin"/>
                                        </div>
                                        <p>Aucun notification!</p>
                                    </center>
                                </div>
                            </div>
                        </div>
                    </div>

                    {# modal bars pour l'administrateur #}
                    <div class="Modal">
                        <div id="treebars" class="w3-modal">
                            <div  class="w3-modal-content w3-animate-top">
                                <div class=" w3-display-topmiddle w3-white w3-padding w3-round-xlarge">
                                    <span onclick="document.getElementById('treebars').style.display='none'" class="w3-button w3-display-topright w3-circle">&times;</span>
                                    <center>
                                        <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/logo.png')}}" style="width: 60px;" class="w3-margin"/>
                                        </div>
                                        <p>Application web </br>Gerant les avancés autorisées </br>Au sein du service comptable de la </br> Direction Inter Régional de la Paositra Malagasy </br> FIANARANTSOA  301!</p>
                                        <p class='w3-margin-bottom w3-text-blue w3-opacity'>Régle | Condition d'utilisation</p>
                                    </center>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {# Vérifiez si l'utilisateur a le rôle USER #}
        {% elseif is_granted('ROLE_USER') %}

            {# contenue pour l'utilisateur simple #}
            
            {# Contenue pour l'administrateur #}
            <div class="w3-row">

                {# bare de navigation pour l'administrateur #}
                <div class="w3-col w3-yellow" id="nav">
                    <a href="{{path('app_home_page')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fa fa-home w3-opacity"></i> 
                            Acceuil
                        </button>
                    </a>
                    <a href="{{path('user_index')}}">
                        <button class="w3-button w3-block w3-left-align" id="active">
                            <i class="fa fa-users w3-opacity"></i> 
                            Missionnaire
                        </button>
                    </a>
                    <a href="{{path('bse_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-briefcase"></i>
                            Mission
                        </button>
                    </a>
                    <a href="{{path('payment_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-dollar-sign"></i> 
                            Payement
                        </button>
                    </a>
                    <a href="{{path('bureau_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-building"></i>
                            Agence
                        </button>
                    </a>
                    <a href="{{path('credit_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-sync"></i>
                            Renouveller credit
                        </button>
                    </a>
                </div>

                {# Corp du contenue pour l'administrateur #}
                <div  class="w3-container content-wrapper">

                    {# Entete du corp pour l'administrateur #}
                    <div class="d-flex align-items-center">
                        <a href="{{ path('app_register') }}" class="w3-button w3-blue w3-quarter w3-margin" id="nouveau"><i class="fa fa-user-plus w3-margin-right"></i>Add utilisateur</a>
                        <input class="w3-input w3-border w3-padding w3-half w3-margin" type="text" placeholder="Rechercher par nom ou par prenom..." id="myInput" onkeyup="myFunction('myTable','myInput',2)">
                        {# bare d'icon #}
                        <div class="w3-container w3-cell w3-mobile w3-display-topright w3-margin">
                            <div>
                                <div  class="w3-center">
                                    <i class="fa fa-bell w3-opacity"  onclick="document.getElementById('notify').style.display='block'"></i>
                                    <i class="fa fa-user-circle w3-opacity w3-margin-left"   onclick="document.getElementById('profile').style.display='block'"></i>
                                    <i class="fa fa-bars w3-opacity w3-margin-left"  onclick="document.getElementById('treebars').style.display='block'"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    {# Contenue #}
                    <div class="d-flex align-items-center">
                        <table class="w3-table w3-bordered" id="myTable">
                            <tr class="w3-light-grey">
                                <th>Matricule</th>
                                <th>Nom</th>
                                <th>Prenom</th>
                                <th>Fonction</th>
                                <th>Taux Journalier</th>
                                <th>Titre</th>
                                <th></th>
                                <th></th>
                                <th></th>
                            </tr>
                            {% for user in user %}
                                <tr>
                                    <td>{{ user.matricule }}</td>
                                    <td>{{ user.nom }}</td>
                                    <td>{{ user.prenom }}</td>
                                    <td>{{ user.fonction }}</td>
                                    <td>{{ user.tauxJournalier }}</td>
                                    <td>{{ user.titre }}</td>
                                    <td class="w3-display-flex">
                                        <a href="{{ path('user_show', {id: user.id}) }}" class="w3-button w3-light-grey w3-small"><i class="fas fa-eye"></i></a>
                                    </td>
                                    <td class="w3-display-flex">
                                        <a href="{{ path('user_edit', {id: user.id}) }}" class="w3-button w3-yellow w3-small"><i class="fas fa-edit"></i></a>
                                    </td>
                                    <td class="w3-display-flex">
                                        <a href="{{ path('user_delete', {id: user.id}) }}" class="w3-button w3-red w3-small"><i class="fas fa-trash-alt"></i></a>
                                    </td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>

                    
                    {# modal profile pour l'administrateur #}
                    <div class="Modal">
                        <div id="profile" class="w3-modal">
                            <div  class="w3-modal-content w3-animate-top">
                                <div class=" w3-display-topmiddle w3-white w3-padding w3-round-xlarge">
                                    <span onclick="document.getElementById('profile').style.display='none'" class="w3-button w3-display-topright w3-circle">&times;</span>
                                    <center>
                                        {% if app.user.sexe == 'Femme' %}
                                            <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/fprofile.png')}}" style="width: 60px;" class="w3-margin w3-circle"/>
                                                <!-- Icône positionnée -->
                                                <a href="{{ path('user_edit', {id: app.user.id}) }}" style="position: absolute; top: 58px; right: 18px;">
                                                    <i class="fas fa-edit w3-white" style="font-size: 10px; color: #007bff;"></i>
                                                </a>
                                            </div>
                                        {% elseif app.user.sexe == 'Homme' %}
                                           <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/hprofile.png')}}" style="width: 60px;" class="w3-margin w3-circle"/>
                                                <!-- Icône positionnée -->
                                                <a href="{{ path('user_edit', {id: app.user.id}) }}" style="position: absolute; top: 58px; right: 18px;">
                                                    <i class="fas fa-edit w3-white" style="font-size: 10px; color: #007bff;"></i>
                                                </a>
                                            </div>

                                        {% endif %}
                                            
                                        <h6>Bonjour !</h6>
                                        <p>{{ app.user.prenom | upper() }}</br>
                                        <span class="w3-opacity">{{ app.user.userIdentifier }}</span></p>
                                        <button class='w3-btn w3-round-xxlarge w3-margin-bottom w3-text-red'>Account</button>
                                        <a href="{{ path('app_logout') }}">
                                            <button class='w3-btn w3-round-xxlarge w3-margin-bottom w3-text-red'>Se deconnecter</button>
                                        </a>
                                    </center>
                                </div>
                            </div>
                        </div>
                    </div>

                    {# modal notification pour l'administrateur #}
                    <div class="Modal">
                        <div id="notify" class="w3-modal">
                            <div  class="w3-modal-content w3-animate-top">
                                <div class=" w3-display-topmiddle w3-white w3-padding w3-round-xlarge">
                                    <span onclick="document.getElementById('notify').style.display='none'" class="w3-button w3-display-topright w3-circle">&times;</span>
                                    <center>
                                        <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/logo.png')}}" style="width: 60px;" class="w3-margin"/>
                                        </div>
                                        <p>Aucun notification!</p>
                                    </center>
                                </div>
                            </div>
                        </div>
                    </div>

                    {# modal bars pour l'administrateur #}
                    <div class="Modal">
                        <div id="treebars" class="w3-modal">
                            <div  class="w3-modal-content w3-animate-top">
                                <div class=" w3-display-topmiddle w3-white w3-padding w3-round-xlarge">
                                    <span onclick="document.getElementById('treebars').style.display='none'" class="w3-button w3-display-topright w3-circle">&times;</span>
                                    <center>
                                        <div class="w3-container-display" style="position: relative; display: inline-block;">
                                                <!-- Image -->
                                                <img src="{{asset('images/logo.png')}}" style="width: 60px;" class="w3-margin"/>
                                        </div>
                                        <p>Application web </br>Gerant les avancés autorisées </br>Au sein du service comptable de la </br> Direction Inter Régional de la Paositra Malagasy </br> FIANARANTSOA  301!</p>
                                        <p class='w3-margin-bottom w3-text-blue w3-opacity'>Régle | Condition d'utilisation</p>
                                    </center>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        {% endif %}


        <script>
            {# script pour le bare de recherche #}
            function myFunction(idTable, idInput) {
                var input, filter, table, tr, td1, td2, i, txtValue1, txtValue2;
                input = document.getElementById(idInput);
                filter = input.value.toUpperCase(); // Valeur à rechercher
                table = document.getElementById(idTable);
                tr = table.getElementsByTagName("tr");

                for (i = 1; i < tr.length; i++) { // Commence après l'en-tête
                    td0 = tr[i].getElementsByTagName("td")[0]; // Colonne matricule
                    td1 = tr[i].getElementsByTagName("td")[1]; // Colonne nom
                    td2 = tr[i].getElementsByTagName("td")[2]; // Colonne prenom
                    td3 = tr[i].getElementsByTagName("td")[3]; // Colonne fonction

                    txtValue0 = td0 ? td0.textContent || td0.innerText : ""; // Texte de la colonne matricule
                    txtValue1 = td1 ? td1.textContent || td1.innerText : ""; // Texte de la colonne nom
                    txtValue2 = td2 ? td2.textContent || td2.innerText : ""; // Texte de la colonne prenom
                    txtValue3 = td3 ? td3.textContent || td3.innerText : ""; // Texte de la colonne fonction

                    // Vérifie si le filtre correspond à la colonne ,matricule ou nom ou prenom
                    if (txtValue0.toUpperCase().indexOf(filter) > -1 || txtValue1.toUpperCase().indexOf(filter) > -1 || txtValue2.toUpperCase().indexOf(filter) > -1 || txtValue3.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = ""; // Affiche la ligne
                    } else {
                        tr[i].style.display = "none"; // Masque la ligne
                    }
                }
            }


            function openMission(etatname) {
                var i;
                var x = document.getElementsByClassName("Mission");
                for (i = 0; i < x.length; i++) {
                    x[i].style.display = "none";  
                }
                document.getElementById(etatname).style.display = "block";  
            }
        </script>
    </body>
</html>


















{#<!DOCTYPE html>
{#<div class="container w3-card-4 w3-margin">
                                        <div class="w3-display-container w3-section">
                                            <center><h5 class="w3-grey w3-padding-16"><i class="fa fa-user w3-opacity"></i> <b>{{ user.titre }} {{ user.nom|upper }} {{ user.prenom }}</b></h5></center>
                                        </div>
                                        <div>
                                            
                                            <!-- Matricule -->
                                            <p><i class="fas fa-id-badge"></i> Matricule: {{ user.matricule }}</p>

                                            <!-- Sexe -->
                                            <p>
                                                {% if user.sexe == 'Femme' %}
                                                    <i class="fas fa-female"></i>Sexe: {{ user.sexe }}
                                                {% elseif user.sexe == 'homme' %}
                                                    <i class="fas fa-male"></i>Sexe: {{ user.sexe }}
                                                {% endif %}
                                            </p>

                                            <!-- Fonction -->
                                            <p><i class="fas fa-briefcase"></i> Fonction: {{ user.fonction }}</p>

                                            <!-- Situation Familiale -->
                                            <p><i class="fas fa-heart"></i> Situation Familiale: {{ user.situationFamiliale }}</p>

                                            <!-- CIN -->
                                            <p><i class="fas fa-id-card"></i> CIN: {{ user.cin }}</p>

                                            <!-- Date CIN -->
                                            <p><i class="fas fa-calendar-alt"></i> Date CIN: {{ user.dateCin|date('Y-m-d') }}</p>

                                            <!-- Taux journalier -->
                                            <p><i class="fas fa-money-bill-wave"></i> Taux journalier: {{ user.tauxJournalier }}</p>

                                            <!-- Adress -->
                                            <p><i class="fas fa-money-bill-wave"></i> Adresse: {{ user.address }}</p>
                                            
                                            <a href="{{ path('user_show', {id: user.id}) }}" class="w3-button w3-light-grey w3-small"><i class="fas fa-eye"></i> Voir</a>
                                            <a href="{{ path('user_edit', {id: user.id}) }}" class="w3-button w3-yellow w3-small"><i class="fas fa-edit"></i> Modifier</a>
                                            <a href="{{ path('user_delete', {id: user.id}) }}" class="w3-button w3-red w3-small"><i class="fas fa-trash-alt"></i> Supprimer</a>
                                        </div>
                                    </div>#}
    <html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Acceuil</title>
        <link rel="stylesheet" href="{{ asset('assets/w3.css')}}">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <link href="{{ asset('assets/bootstrap/bootstrap.min.css') }}" rel="stylesheet">
        <script src="{{ asset('assets/bootstrap/bootstrap.bundle.min.js') }}"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
        
        <style>
            * {
                box-sizing: border-box;
            }

            body, h1, h2, h3, h4, h5, h6 {
                font-family: "Times New Roman", Times, serif;
            }

            a{
                text-decoration: none;
                color: black;
            }
            .w3-button{
                display: block;
            }

            .container {
                min-height: 350px;
                background: #fff;
                border-radius: 2px;
                overflow: hidden;
                box-shadow: 0 14px 28px rgba(0, 0, 0, 0.15);
                margin-bottom: 5%;
            }

            /* Refonte du menu de navigation pour mieux utiliser W3.CSS */
            #nav {
                width: 20%;
                height: 100vh;
                position: fixed;
                top: 0;
                left: 0;
                z-index: 999;
                padding-top: 20px;
            }

            #nav a {
                display: block;
                margin: 10px 0;
            }

            /* Mobile Responsiveness */
            @media(max-width: 1050px) {
                #nav {
                    width: 100%;
                    position: relative;
                    height: auto;
                }
            }

            .content-wrapper {
                margin-left: 22%;
                padding: 20px;
            }

            /* Refonte des boutons */
            .w3-button {
                margin-bottom: 10px;
            }
            #nouveau{
                margin-right: 10px;
            }
            #active{
                background: rgba(0, 0, 0, 0.10);
                color: black;
            }
        </style>
    </head>
    <body>

        {# Vérifiez si l'utilisateur a le rôle ADMIN }
        {% if is_granted('ROLE_ADMIN') %}
            <div class="w3-row">
                <div class="w3-col w3-yellow" id="nav">
                    <h1 class="w3-opacity h5 mb-3 font-weight-normal">
                        <i class="fa fa-user-circle w3-opacity"></i>
                        {{ app.user.userIdentifier }}
                    </h1>
                    <a href="{{path('app_home_page')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fa fa-home w3-opacity"></i> 
                            Acceuil
                        </button>
                    </a>
                    <a href="{{path('user_index')}}">
                        <button class="w3-button w3-block w3-left-align" id="active">
                            <i class="fa fa-users w3-opacity"></i> 
                            Missionnaire
                        </button>
                    </a>
                    <a href="{{path('bse_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-briefcase"></i>
                            Mission
                        </button>
                    </a>
                    <a href="{{path('payment_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-dollar-sign"></i> 
                            Payement
                        </button>
                    </a>
                    <a href="{{path('bureau_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-building"></i>
                            Agence
                        </button>
                    </a>
                    <a href="{{path('credit_index')}}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-sync"></i>
                            Renouveller credit
                        </button>
                    </a>
                    <a href="{{ path('app_logout') }}">
                        <button class="w3-button w3-block w3-left-align">
                            <i class="fas fa-sign-out-alt"></i>
                            Se deconnecter
                        </button>
                    </a>
                    {#
                    <a href="{{path('ordreRoute_index')}}"><button class="w3-button w3-block w3-left-align">Ordre de route</button></a>
                    <a href="{{path('bst_index')}}"><button class="w3-button w3-block w3-left-align">Bon Spécial de Transport</button></a>
                    <a href="{{path('pdf_bst')}}"><button class="w3-button w3-block w3-left-align">pdf</button></a>
                    <a href="{{path('pdf_or')}}"><button class="w3-button w3-block w3-left-align">Or</button></a>
                    <a href="{{path('user_index')}}"><button class="w3-button w3-block w3-left-align"><i class="fas fa-flag"></i>Missionnaire</button></a>
                    <!--a href=""><button class="w3-button w3-block w3-left-align">Deduire facture du bst</button></a>
                    <a href=""><button class="w3-button w3-block w3-left-align">Générer rapport</button></a-->
                    <a href="{{ path('send_email') }}"><button class="w3-button w3-block w3-left-align">Send email</button></a>#}
                </div>
        {#% elseif is_granted('ROLE_MISSIONNAIRE') %}
            <div class="w3-container content-wrapper">
                <h1>Missionnaire</h1>
                <p>Liste des missionnaires</p>
                <a href=""><button class="w3-button">Générer mon OR</button></a>
                <a href=""><button class="w3-button">Générer mon BST</button></a>
                <a href="{{ path('app_logout') }}"><button class="w3-button">Se déconnecter</button></a>
            </div>
        {% elseif is_granted('ROLE_USER') %}
            <div class="w3-container content-wrapper">
                <h1>Utilisateur pour Payement et création</h1>
                <a href="{{ path('bst_index') }}"><button class="w3-button">Bon Spécial de Transport</button></a>
                <a href="{{ path('bse_index') }}"><button class="w3-button">Bon de saisie des engagements</button></a>
                <a href="{{ path('ordreRoute_index') }}"><button class="w3-button">Ordre de route</button></a>
                <a href="{{ path('payment_index') }}"><button class="w3-button">Payement</button></a>
                <a href=""><button class="w3-button">Deduire facture du bst</button></a>
                <a href=""><button class="w3-button">Générer rapport</button></a>
                <a href=""><button class="w3-button">Générer un OR</button></a>
                <a href=""><button class="w3-button">Générer un BST</button></a>
                <a href="{{ path('app_logout') }}"><button class="w3-button">Se déconnecter</button></a>
            </div>
        {% endif %}

        <!-- Recherche Utilisateur -->
        <div class="w3-container content-wrapper">
        <div class="d-flex align-items-center">
            <a href="{{ path('app_register') }}" class="w3-button w3-blue w3-quarter w3-margin" id="nouveau"><i class="fa fa-user-plus"></i>Add utilisateur</a>
            <input type="text" id="searchInput" class="w3-input w3-border w3-threequarter" placeholder="Tapez pour rechercher...">
        </div>
        <div id="searchResults" class="mt-3"></div>
    {#</div>


    <!-- Liste des utilisateurs -->
    <div class="w3-container content-wrapper">
        <div>
            {% for user in user %}
                <div class="w3-container w3-animate-zoom w3-half w3-margin-bottom">
                    <div class="container w3-card-4 w3-margin">
                        <div class="w3-display-container w3-section">
                            <center><h5 class="w3-grey w3-padding-16"><i class="fa fa-user w3-opacity"></i> <b>{{ user.titre }} {{ user.nom|upper }} {{ user.prenom }}</b></h5></center>
                        </div>
                        <div class="w3-padding">
                            
                            <!-- Matricule -->
                            <p><i class="fas fa-id-badge"></i> Matricule: {{ user.matricule }}</p>

                            <!-- Sexe -->
                            <p>
                                {% if user.sexe == 'femme' %}
                                    <i class="fas fa-female"></i>Sexe: {{ user.sexe }}
                                {% elseif user.sexe == 'homme' %}
                                    <i class="fas fa-male"></i>Sexe: {{ user.sexe }}
                                {% endif %}
                            </p>

                            <!-- Fonction -->
                            <p><i class="fas fa-briefcase"></i> Fonction: {{ user.fonction }}</p>

                            <!-- Situation Familiale -->
                            <p><i class="fas fa-heart"></i> Situation Familiale: {{ user.situationFamiliale }}</p>

                            <!-- CIN -->
                            <p><i class="fas fa-id-card"></i> CIN: {{ user.cin }}</p>

                            <!-- Date CIN -->
                            <p><i class="fas fa-calendar-alt"></i> Date CIN: {{ user.dateCin|date('Y-m-d') }}</p>

                            <!-- Taux journalier -->
                            <p><i class="fas fa-money-bill-wave"></i> Taux journalier: {{ user.tauxJournalier }}</p>

                            <!-- Adress -->
                            <p><i class="fas fa-money-bill-wave"></i> Adresse: {{ user.address }}</p>
                            
                            <a href="{{ path('user_show', {id: user.id}) }}" class="w3-button w3-light-grey w3-small"><i class="fas fa-eye"></i> Voir</a>
                            <a href="{{ path('user_edit', {id: user.id}) }}" class="w3-button w3-yellow w3-small"><i class="fas fa-edit"></i> Modifier</a>
                            <a href="{{ path('user_delete', {id: user.id}) }}" class="w3-button w3-red w3-small"><i class="fas fa-trash-alt"></i> Supprimer</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

    </div>

        </div>

        <script>
            document.getElementById('searchInput').addEventListener('input', function(event) {
                let searchTerm = event.target.value;

                if (searchTerm.length >= 0) {
                    fetch(`/user/ajax?q=${searchTerm}`)
                        .then(response => response.json())
                        .then(data => {
                            let resultsDiv = document.getElementById('searchResults');
                            resultsDiv.innerHTML = '';

                            if (data.length === 0) {
                                resultsDiv.innerHTML = '<p>Aucun résultat trouvé.</p>';
                            } else {
                                data.forEach(employe => {
                                    let row = document.createElement('div');
                                    row.classList.add('w3-card', 'w3-margin', 'w3-padding');
                                    row.innerHTML = `
                                        <div><strong>${employe.nom} ${employe.prenom}</strong><br>Email: ${employe.email}</div>
                                        <button class="w3-button w3-blue">Voir</button>
                                    `;
                                    resultsDiv.appendChild(row);
                                });
                            }
                        })
                        .catch(error => {
                            console.error('Erreur lors de la recherche:', error);
                            document.getElementById('searchResults').innerHTML = '<p>Une erreur est survenue lors de la recherche.</p>';
                        });
                } else {
                    document.getElementById('searchResults').innerHTML = '';
                }
            });
        </script>

    </body>
    </html>#}
